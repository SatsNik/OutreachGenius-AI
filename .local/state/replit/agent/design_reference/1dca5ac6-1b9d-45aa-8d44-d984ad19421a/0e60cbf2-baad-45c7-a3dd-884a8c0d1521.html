<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ICY - AI Influencer Outreach Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        border: "hsl(214.3 31.8% 91.4%)",
                        input: "hsl(214.3 31.8% 91.4%)",
                        ring: "hsl(221.2 84% 60%)",
                        background: "hsl(0 0% 100%)",
                        foreground: "hsl(222.2 84% 4.9%)",
                        primary: {
                            DEFAULT: "hsl(221.2 84% 60%)",
                            foreground: "hsl(210 40% 98%)",
                        },
                        secondary: {
                            DEFAULT: "hsl(210 40% 96%)",
                            foreground: "hsl(222.2 84% 4.9%)",
                        },
                        muted: {
                            DEFAULT: "hsl(210 40% 96%)",
                            foreground: "hsl(215.4 16.3% 46.9%)",
                        },
                        accent: {
                            DEFAULT: "hsl(210 40% 96%)",
                            foreground: "hsl(222.2 84% 4.9%)",
                        },
                        destructive: {
                            DEFAULT: "hsl(0 84.2% 60.2%)",
                            foreground: "hsl(210 40% 98%)",
                        },
                        card: {
                            DEFAULT: "hsl(0 0% 100%)",
                            foreground: "hsl(222.2 84% 4.9%)",
                        }
                    }
                }
            }
        }
    </script>
    <style>
        .animate-pulse-slow {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #3B82F6, #1E40AF);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .glass-effect {
            backdrop-filter: blur(8px);
            background: rgba(255, 255, 255, 0.8);
        }
        
        .message-typing {
            overflow: hidden;
            border-right: 2px solid #3B82F6;
            white-space: nowrap;
            animation: typing 3s steps(30) 1s forwards, blink 0.75s step-end infinite;
        }
        
        @keyframes typing {
            from { width: 0; }
            to { width: 100%; }
        }
        
        @keyframes blink {
            from, to { border-color: transparent; }
            50% { border-color: #3B82F6; }
        }
    </style>
</head>
<body class="h-full bg-slate-50 font-sans">
    <!-- Header -->
    <header class="bg-white border-b border-gray-200 sticky top-0 z-40">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 bg-gradient-to-br from-blue-600 to-blue-800 rounded-lg flex items-center justify-center">
                        <i data-lucide="zap" class="w-5 h-5 text-white"></i>
                    </div>
                    <h1 class="text-xl font-bold gradient-text">ICY</h1>
                    <span class="text-sm text-gray-500">AI Influencer Outreach</span>
                </div>
                <div class="flex items-center space-x-4">
                    <button class="relative p-2 text-gray-600 hover:text-gray-900 transition-colors">
                        <i data-lucide="bell" class="w-5 h-5"></i>
                        <span class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full"></span>
                    </button>
                    <div class="w-8 h-8 bg-gradient-to-br from-blue-100 to-blue-200 rounded-full flex items-center justify-center">
                        <i data-lucide="user" class="w-4 h-4 text-blue-600"></i>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Page Header -->
        <div class="mb-8">
            <h2 class="text-2xl font-bold text-gray-900 mb-2">Discovered Influencers</h2>
            <p class="text-gray-600">Connect with influencers and generate personalized outreach messages using AI</p>
        </div>

        <!-- Filters -->
        <div class="bg-white rounded-lg border border-gray-200 p-6 mb-6">
            <div class="flex flex-wrap gap-4">
                <div class="flex items-center space-x-2">
                    <label class="text-sm font-medium text-gray-700">Category:</label>
                    <select class="border border-gray-300 rounded-md px-3 py-1 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        <option>All Categories</option>
                        <option>Technology</option>
                        <option>Beauty</option>
                        <option>Fitness</option>
                        <option>Travel</option>
                        <option>Food</option>
                    </select>
                </div>
                <div class="flex items-center space-x-2">
                    <label class="text-sm font-medium text-gray-700">Followers:</label>
                    <select class="border border-gray-300 rounded-md px-3 py-1 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        <option>All Ranges</option>
                        <option>1K - 10K</option>
                        <option>10K - 100K</option>
                        <option>100K - 1M</option>
                        <option>1M+</option>
                    </select>
                </div>
                <div class="flex items-center space-x-2">
                    <label class="text-sm font-medium text-gray-700">Platform:</label>
                    <select class="border border-gray-300 rounded-md px-3 py-1 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        <option>All Platforms</option>
                        <option>YouTube</option>
                        <option>Instagram</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Influencer Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- @COMPONENT: InfluencerCard [influencer data] -->
            
            <!-- Influencer Card 1 - Tech -->
            <div class="bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow">
                <div class="flex items-start space-x-4 mb-4">
                    <!-- Modern tech influencer with professional headshot against tech background -->
                    <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&h=100" 
                         alt="Tech influencer profile" 
                         class="w-12 h-12 rounded-full object-cover">
                    <div class="flex-1">
                        <h3 class="font-semibold text-gray-900" data-bind="influencer.name">Alex Chen</h3>
                        <p class="text-sm text-gray-600" data-bind="influencer.handle">@alextech</p>
                        <div class="flex items-center space-x-2 mt-1">
                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                Technology
                            </span>
                            <div class="flex items-center text-xs text-gray-500">
                                <i data-lucide="youtube" class="w-3 h-3 mr-1"></i>
                                YouTube
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="space-y-2 mb-4">
                    <div class="flex justify-between text-sm">
                        <span class="text-gray-600">Followers:</span>
                        <span class="font-medium" data-bind="influencer.followers">245K</span>
                    </div>
                    <div class="flex justify-between text-sm">
                        <span class="text-gray-600">Avg. Views:</span>
                        <span class="font-medium" data-bind="influencer.avgViews">12.3K</span>
                    </div>
                    <div class="flex justify-between text-sm">
                        <span class="text-gray-600">Brand Fit:</span>
                        <div class="flex items-center space-x-1">
                            <div class="w-16 h-2 bg-gray-200 rounded-full">
                                <div class="w-14 h-2 bg-green-500 rounded-full"></div>
                            </div>
                            <span class="text-xs font-medium text-green-600">87%</span>
                        </div>
                    </div>
                </div>

                <button class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors flex items-center justify-center space-x-2"
                        onclick="openMessageGenerator('tech-influencer-1')" 
                        data-event="click:handleConnect" 
                        data-implementation="Should open message generator modal with influencer context">
                    <i data-lucide="message-circle" class="w-4 h-4"></i>
                    <span>Connect</span>
                </button>
            </div>

            <!-- Influencer Card 2 - Beauty -->
            <div class="bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow">
                <div class="flex items-start space-x-4 mb-4">
                    <!-- Beauty influencer with makeup and lifestyle content -->
                    <img src="https://pixabay.com/get/ga94142adb03e3fd8cdd1754ea61b2f145f9a4294200f0ea2cab5416e47e4f37bf92487d4d35fefdbfdf7c62ab8f6a43bb6359f3cba042cf5d5bd418623ff77df_1280.jpg" 
                         alt="Beauty influencer profile" 
                         class="w-12 h-12 rounded-full object-cover">
                    <div class="flex-1">
                        <h3 class="font-semibold text-gray-900" data-bind="influencer.name">Sofia Rodriguez</h3>
                        <p class="text-sm text-gray-600" data-bind="influencer.handle">@sofiabeauty</p>
                        <div class="flex items-center space-x-2 mt-1">
                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-pink-100 text-pink-800">
                                Beauty
                            </span>
                            <div class="flex items-center text-xs text-gray-500">
                                <i data-lucide="youtube" class="w-3 h-3 mr-1"></i>
                                YouTube
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="space-y-2 mb-4">
                    <div class="flex justify-between text-sm">
                        <span class="text-gray-600">Followers:</span>
                        <span class="font-medium" data-bind="influencer.followers">189K</span>
                    </div>
                    <div class="flex justify-between text-sm">
                        <span class="text-gray-600">Avg. Views:</span>
                        <span class="font-medium" data-bind="influencer.avgViews">8.7K</span>
                    </div>
                    <div class="flex justify-between text-sm">
                        <span class="text-gray-600">Brand Fit:</span>
                        <div class="flex items-center space-x-1">
                            <div class="w-16 h-2 bg-gray-200 rounded-full">
                                <div class="w-12 h-2 bg-yellow-500 rounded-full"></div>
                            </div>
                            <span class="text-xs font-medium text-yellow-600">72%</span>
                        </div>
                    </div>
                </div>

                <button class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors flex items-center justify-center space-x-2"
                        onclick="openMessageGenerator('beauty-influencer-1')" 
                        data-event="click:handleConnect">
                    <i data-lucide="message-circle" class="w-4 h-4"></i>
                    <span>Connect</span>
                </button>
            </div>

            <!-- Influencer Card 3 - Fitness -->
            <div class="bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow">
                <div class="flex items-start space-x-4 mb-4">
                    <!-- Fitness influencer in workout setting with athletic gear -->
                    <img src="https://pixabay.com/get/g8720e3c0ce8ee3bb21ca1325e6da71053e4811c63519fbf669b2b17fcd65e3a6da6cacc19af40ea3bc4986bd7f18872ffd9657486b255b9571ba026f19fad6bf_1280.jpg" 
                         alt="Fitness influencer profile" 
                         class="w-12 h-12 rounded-full object-cover">
                    <div class="flex-1">
                        <h3 class="font-semibold text-gray-900" data-bind="influencer.name">Marcus Johnson</h3>
                        <p class="text-sm text-gray-600" data-bind="influencer.handle">@marcusfitness</p>
                        <div class="flex items-center space-x-2 mt-1">
                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                Fitness
                            </span>
                            <div class="flex items-center text-xs text-gray-500">
                                <i data-lucide="youtube" class="w-3 h-3 mr-1"></i>
                                YouTube
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="space-y-2 mb-4">
                    <div class="flex justify-between text-sm">
                        <span class="text-gray-600">Followers:</span>
                        <span class="font-medium" data-bind="influencer.followers">321K</span>
                    </div>
                    <div class="flex justify-between text-sm">
                        <span class="text-gray-600">Avg. Views:</span>
                        <span class="font-medium" data-bind="influencer.avgViews">15.2K</span>
                    </div>
                    <div class="flex justify-between text-sm">
                        <span class="text-gray-600">Brand Fit:</span>
                        <div class="flex items-center space-x-1">
                            <div class="w-16 h-2 bg-gray-200 rounded-full">
                                <div class="w-15 h-2 bg-green-500 rounded-full"></div>
                            </div>
                            <span class="text-xs font-medium text-green-600">94%</span>
                        </div>
                    </div>
                </div>

                <button class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors flex items-center justify-center space-x-2"
                        onclick="openMessageGenerator('fitness-influencer-1')" 
                        data-event="click:handleConnect">
                    <i data-lucide="message-circle" class="w-4 h-4"></i>
                    <span>Connect</span>
                </button>
            </div>

            <!-- @END_COMPONENT: InfluencerCard -->
        </div>
    </main>

    <!-- Message Generator Modal -->
    <div id="messageModal" class="fixed inset-0 z-50 hidden">
        <!-- Backdrop -->
        <div class="fixed inset-0 bg-black/50 backdrop-blur-sm" onclick="closeMessageGenerator()"></div>
        
        <!-- Modal -->
        <div class="fixed inset-0 flex items-center justify-center p-4">
            <div class="bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden">
                <!-- Header -->
                <div class="flex items-center justify-between p-6 border-b border-gray-200">
                    <div>
                        <h3 class="text-lg font-semibold text-gray-900">AI Message Generator</h3>
                        <p class="text-sm text-gray-600">Powered by Gemini 2.0 Flash Lite</p>
                    </div>
                    <button onclick="closeMessageGenerator()" 
                            class="p-2 hover:bg-gray-100 rounded-lg transition-colors">
                        <i data-lucide="x" class="w-5 h-5 text-gray-500"></i>
                    </button>
                </div>

                <!-- Content -->
                <div class="p-6 overflow-y-auto max-h-[calc(90vh-140px)]">
                    <!-- Influencer Info -->
                    <div id="influencerInfo" class="bg-gray-50 rounded-lg p-4 mb-6">
                        <div class="flex items-center space-x-3">
                            <img id="modalInfluencerAvatar" 
                                 src="" 
                                 alt="Influencer avatar" 
                                 class="w-10 h-10 rounded-full">
                            <div>
                                <h4 id="modalInfluencerName" class="font-medium text-gray-900">Loading...</h4>
                                <p id="modalInfluencerCategory" class="text-sm text-gray-600">Category</p>
                            </div>
                        </div>
                    </div>

                    <!-- Generation Status -->
                    <div id="generationStatus" class="mb-6">
                        <!-- Loading State -->
                        <div id="loadingState" class="flex items-center space-x-3 p-4 bg-blue-50 rounded-lg">
                            <div class="animate-spin w-5 h-5 border-2 border-blue-600 border-t-transparent rounded-full"></div>
                            <span class="text-sm text-blue-700">Generating personalized message...</span>
                        </div>

                        <!-- Generated Message -->
                        <div id="generatedMessage" class="hidden">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Generated Message:</label>
                            <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                                <div id="messageContent" class="text-sm text-gray-900 whitespace-pre-wrap leading-relaxed"></div>
                            </div>
                            
                            <!-- Edit Message -->
                            <div class="mt-3">
                                <button id="editMessageBtn" 
                                        onclick="enableMessageEdit()" 
                                        class="text-sm text-blue-600 hover:text-blue-700 font-medium">
                                    Edit message
                                </button>
                            </div>
                            
                            <!-- Message Editor (Hidden by default) -->
                            <div id="messageEditor" class="hidden mt-3">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Edit your message:</label>
                                <textarea id="editableMessage" 
                                          rows="6" 
                                          class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none"
                                          placeholder="Edit your outreach message..."></textarea>
                                <div class="flex space-x-2 mt-2">
                                    <button onclick="saveMessageEdit()" 
                                            class="px-3 py-1 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 transition-colors">
                                        Save
                                    </button>
                                    <button onclick="cancelMessageEdit()" 
                                            class="px-3 py-1 bg-gray-200 text-gray-700 text-sm rounded-md hover:bg-gray-300 transition-colors">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Error State -->
                        <div id="errorState" class="hidden p-4 bg-red-50 border border-red-200 rounded-lg">
                            <div class="flex items-center space-x-2">
                                <i data-lucide="alert-circle" class="w-5 h-5 text-red-600"></i>
                                <span class="text-sm text-red-700">Failed to generate message. Please try again.</span>
                            </div>
                            <button onclick="regenerateMessage()" 
                                    class="mt-2 text-sm text-red-600 hover:text-red-700 font-medium">
                                Try again
                            </button>
                        </div>
                    </div>

                    <!-- Email Section -->
                    <div id="emailSection" class="hidden">
                        <div class="border-t border-gray-200 pt-6">
                            <h4 class="font-medium text-gray-900 mb-4">Contact Information</h4>
                            
                            <!-- Auto-detected Email -->
                            <div id="detectedEmailSection" class="mb-4">
                                <div class="flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg">
                                    <div class="flex items-center space-x-2">
                                        <i data-lucide="check-circle" class="w-4 h-4 text-green-600"></i>
                                        <span class="text-sm text-green-700">Email detected:</span>
                                        <span id="detectedEmail" class="text-sm font-medium text-green-800"></span>
                                    </div>
                                    <button onclick="useCustomEmail()" 
                                            class="text-xs text-green-600 hover:text-green-700">
                                        Use different email
                                    </button>
                                </div>
                            </div>

                            <!-- Custom Email Input -->
                            <div id="customEmailSection">
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    Influencer Email Address
                                </label>
                                <div class="flex space-x-2">
                                    <input type="email" 
                                           id="customEmailInput" 
                                           placeholder="influencer@example.com" 
                                           class="flex-1 border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                    <button onclick="validateEmail()" 
                                            class="px-4 py-2 bg-gray-200 text-gray-700 text-sm rounded-md hover:bg-gray-300 transition-colors">
                                        Verify
                                    </button>
                                </div>
                                <p class="text-xs text-gray-500 mt-1">We'll send the outreach message to this email address</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Footer -->
                <div class="flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50">
                    <button onclick="closeMessageGenerator()" 
                            class="px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors">
                        Cancel
                    </button>
                    <button id="sendMessageBtn" 
                            onclick="sendMessage()" 
                            disabled
                            class="px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors flex items-center space-x-2">
                        <i data-lucide="send" class="w-4 h-4"></i>
                        <span>Send Message</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Toast -->
    <div id="successToast" class="fixed bottom-4 right-4 z-60 hidden">
        <div class="bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg flex items-center space-x-2">
            <i data-lucide="check-circle" class="w-5 h-5"></i>
            <span>Message sent successfully!</span>
        </div>
    </div>

    <!-- Error Toast -->
    <div id="errorToast" class="fixed bottom-4 right-4 z-60 hidden">
        <div class="bg-red-600 text-white px-6 py-3 rounded-lg shadow-lg flex items-center space-x-2">
            <i data-lucide="alert-circle" class="w-5 h-5"></i>
            <span>Failed to send message. Please try again.</span>
        </div>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // Mock influencer data
        const influencerData = {
            'tech-influencer-1': {
                name: 'Alex Chen',
                handle: '@alextech',
                category: 'Technology',
                email: 'alex@techreview.com',
                avatar: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&h=100',
                content: 'Latest tech reviews, smartphone comparisons, and AI innovations'
            },
            'beauty-influencer-1': {
                name: 'Sofia Rodriguez',
                handle: '@sofiabeauty',
                category: 'Beauty',
                email: null, // No email detected
                avatar: 'https://images.unsplash.com/photo-1494790108755-2616c96d5d2b?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&h=100',
                content: 'Makeup tutorials, skincare routines, and beauty product reviews'
            },
            'fitness-influencer-1': {
                name: 'Marcus Johnson',
                handle: '@marcusfitness',
                category: 'Fitness',
                email: 'marcus.johnson@gmail.com',
                avatar: 'https://images.unsplash.com/photo-1571019613540-b7ba3e1b0fcd?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&h=100',
                content: 'Workout routines, nutrition tips, and fitness motivation'
            }
        };

        let currentInfluencer = null;
        let generatedMessageText = '';

        // Open message generator modal
        function openMessageGenerator(influencerId) {
            currentInfluencer = influencerData[influencerId];
            if (!currentInfluencer) return;

            // Show modal
            document.getElementById('messageModal').classList.remove('hidden');
            
            // Update influencer info
            document.getElementById('modalInfluencerAvatar').src = currentInfluencer.avatar;
            document.getElementById('modalInfluencerName').textContent = currentInfluencer.name;
            document.getElementById('modalInfluencerCategory').textContent = currentInfluencer.category;

            // Reset states
            document.getElementById('loadingState').classList.remove('hidden');
            document.getElementById('generatedMessage').classList.add('hidden');
            document.getElementById('errorState').classList.add('hidden');
            document.getElementById('emailSection').classList.add('hidden');
            document.getElementById('sendMessageBtn').disabled = true;

            // Simulate AI message generation
            setTimeout(() => {
                generateMessage();
            }, 2000);
        }

        // Close message generator modal
        function closeMessageGenerator() {
            document.getElementById('messageModal').classList.add('hidden');
            currentInfluencer = null;
            generatedMessageText = '';
        }

        // Generate personalized message using AI
        function generateMessage() {
            // TODO: Implement actual Gemini AI API call with key: AIzaSyDANqyMJgyxeog62KzpoZ5LRA4YRa6SoX8
            
            // Mock AI-generated message based on influencer category
            const messages = {
                'Technology': `Hi ${currentInfluencer.name},

I hope this message finds you well! I've been following your tech content, especially your recent reviews on AI innovations and smartphone comparisons. Your analytical approach and clear explanations really resonate with tech enthusiasts.

I represent a cutting-edge tech brand that's launching an innovative product that aligns perfectly with your content style. We'd love to explore a potential collaboration where you could provide your honest review and insights to your engaged audience.

Would you be interested in learning more about this opportunity? I'd be happy to share details about the product and discuss how we can create value for your community.

Best regards,
ICY Outreach Team`,

                'Beauty': `Hello ${currentInfluencer.name},

I've been absolutely loving your makeup tutorials and skincare content! Your authentic approach to beauty and the way you connect with your audience is truly inspiring.

I'm reaching out on behalf of a beauty brand that's passionate about empowering individuals through high-quality, inclusive beauty products. We believe your aesthetic and values align beautifully with our brand mission.

We'd love to explore a collaboration opportunity where you could share your honest thoughts about our products with your community. This could include product reviews, tutorials, or creative content that showcases your unique style.

Would you be interested in discussing this further? I'd love to hear your thoughts and answer any questions you might have.

Looking forward to potentially working together!

Best,
ICY Outreach Team`,

                'Fitness': `Hi ${currentInfluencer.name},

Your dedication to fitness and the way you motivate your community is truly impressive! I've been following your workout routines and nutrition tips, and they've been incredibly helpful for fitness enthusiasts.

I'm contacting you about an exciting collaboration opportunity with a fitness brand that shares your passion for helping people achieve their health goals. We have some innovative fitness products that we believe would resonate with your audience.

We'd love to explore a partnership where you could authentically showcase these products through your workout content, tutorials, or honest reviews. Your genuine approach to fitness content would be perfect for introducing these products to the community.

Would you be open to discussing this collaboration? I'd be happy to provide more details about the products and how we can create valuable content together.

Stay strong!

ICY Outreach Team`
            };

            const message = messages[currentInfluencer.category] || messages['Technology'];
            
            // Hide loading state
            document.getElementById('loadingState').classList.add('hidden');
            
            // Show generated message
            document.getElementById('generatedMessage').classList.remove('hidden');
            document.getElementById('messageContent').textContent = message;
            generatedMessageText = message;

            // Show email section
            document.getElementById('emailSection').classList.remove('hidden');
            
            // Handle email detection
            if (currentInfluencer.email) {
                document.getElementById('detectedEmailSection').classList.remove('hidden');
                document.getElementById('detectedEmail').textContent = currentInfluencer.email;
                document.getElementById('customEmailSection').classList.add('hidden');
                document.getElementById('sendMessageBtn').disabled = false;
            } else {
                document.getElementById('detectedEmailSection').classList.add('hidden');
                document.getElementById('customEmailSection').classList.remove('hidden');
            }
        }

        // Handle message editing
        function enableMessageEdit() {
            document.getElementById('editableMessage').value = generatedMessageText;
            document.getElementById('messageEditor').classList.remove('hidden');
            document.getElementById('editMessageBtn').classList.add('hidden');
        }

        function saveMessageEdit() {
            generatedMessageText = document.getElementById('editableMessage').value;
            document.getElementById('messageContent').textContent = generatedMessageText;
            document.getElementById('messageEditor').classList.add('hidden');
            document.getElementById('editMessageBtn').classList.remove('hidden');
        }

        function cancelMessageEdit() {
            document.getElementById('messageEditor').classList.add('hidden');
            document.getElementById('editMessageBtn').classList.remove('hidden');
        }

        // Handle custom email
        function useCustomEmail() {
            document.getElementById('detectedEmailSection').classList.add('hidden');
            document.getElementById('customEmailSection').classList.remove('hidden');
            document.getElementById('sendMessageBtn').disabled = true;
        }

        function validateEmail() {
            const email = document.getElementById('customEmailInput').value;
            if (email && email.includes('@')) {
                document.getElementById('sendMessageBtn').disabled = false;
                showToast('Email validated successfully!', 'success');
            } else {
                showToast('Please enter a valid email address', 'error');
            }
        }

        // Send message
        function sendMessage() {
            const sendBtn = document.getElementById('sendMessageBtn');
            sendBtn.disabled = true;
            sendBtn.innerHTML = '<div class="animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2"></div>Sending...';

            // TODO: Implement actual SendGrid email sending
            setTimeout(() => {
                closeMessageGenerator();
                showToast('Message sent successfully!', 'success');
                
                // Reset button
                sendBtn.disabled = false;
                sendBtn.innerHTML = '<i data-lucide="send" class="w-4 h-4 mr-2"></i>Send Message';
                lucide.createIcons();
            }, 2000);
        }

        // Regenerate message on error
        function regenerateMessage() {
            document.getElementById('errorState').classList.add('hidden');
            document.getElementById('loadingState').classList.remove('hidden');
            setTimeout(() => {
                generateMessage();
            }, 2000);
        }

        // Show toast notifications
        function showToast(message, type = 'success') {
            const toast = document.getElementById(type + 'Toast');
            if (toast) {
                toast.querySelector('span').textContent = message;
                toast.classList.remove('hidden');
                setTimeout(() => {
                    toast.classList.add('hidden');
                }, 3000);
            }
        }

        // Close modal on escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeMessageGenerator();
            }
        });
    </script>
</body>
</html>